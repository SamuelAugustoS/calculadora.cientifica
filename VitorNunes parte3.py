class CalculatorApp(App):
    def build(self):
        # Configuração da janela e inicialização de variáveis
        # Criação do gerenciador de tela e adição das telas
        # Retorno do gerenciador de tela como interface principal
        # ...

    def calcular_expressao(self, expressao):
        # Lógica para calcular uma expressão matemática
        # ...

    def atualizar_historico(self):
        # Lógica para atualizar o histórico exibido na tela
        # ...

    def back_to_calculator(self):
        # Lógica para retornar à tela da calculadora
        # ...
